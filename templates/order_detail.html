{% extends "base.html" %} {% block content %}
<section class="order-detail">
  <div class="order-detail-header">
    <div>
      <h2>Detalle de Orden #{{ order.id }}</h2>
      <p class="orders-subtitle">Revisa productos, cantidades y estado.</p>
    </div>
    <a href="{{ url_for('orders.my_orders') }}" class="btn btn-secondary"
      >Volver</a
    >
  </div>

  <div class="order-summary-card">
    <div>
      <span>Fecha</span>
      <strong
        >{{ order.created_at[:16]|replace('T', ' ') if order.created_at else ''
        }}</strong
      >
    </div>
    <div>
      <span>Estado</span>
      <strong
        class="order-status-pill {{ 'status-success' if order.status == 'completed' else 'status-warning' }}"
      >
        {{ order.status }}
      </strong>
    </div>
    <div>
      <span>Total</span>
      <strong>RD$ {{ order.total_amount }}</strong>
    </div>
  </div>

  <div class="order-items-card">
    <div class="order-items-header">
      <h3>Productos</h3>
      <span>{{ order['items']|length }} artículos</span>
    </div>
    <div class="order-items-list">
      {% for item in order['items'] %}
      <article class="order-item">
        <div>
          <h4>{{ item.product_name }}</h4>
          <p>RD$ {{ item.price_at_purchase }} × {{ item.quantity }}</p>
        </div>
        <strong>RD$ {{ item.price_at_purchase * item.quantity }}</strong>
      </article>
      {% endfor %}
    </div>
    <div class="order-items-total">
      <span>Total</span>
      <strong>RD$ {{ order.total_amount }}</strong>
    </div>
  </div>
</section>
{% endblock %}
